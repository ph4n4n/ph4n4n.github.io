<!DOCTYPE html>
<html lang=vi>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Zero to Hero: RESTful API - Thiết kế và xây dựng API chuẩnRESTful API là kiến trúc API phổ biến nhất hiện nay, sử dụng HTTP protocol để tạo ra các web services có thể mở rộng và dễ bảo trì. 1. Giới th">
<meta property="og:type" content="article">
<meta property="og:title" content="Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn">
<meta property="og:url" content="https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/index.html">
<meta property="og:site_name" content="ph4n4n&#39;s code notes &amp; tips">
<meta property="og:description" content="Zero to Hero: RESTful API - Thiết kế và xây dựng API chuẩnRESTful API là kiến trúc API phổ biến nhất hiện nay, sử dụng HTTP protocol để tạo ra các web services có thể mở rộng và dễ bảo trì. 1. Giới th">
<meta property="og:locale" content="vi_VN">
<meta property="article:published_time" content="2025-06-26T09:31:12.000Z">
<meta property="article:modified_time" content="2025-06-27T07:02:33.065Z">
<meta property="article:author" content="ph4n4n">
<meta property="article:tag" content="Node.js">
<meta property="article:tag" content="Backend">
<meta property="article:tag" content="RESTful API">
<meta property="article:tag" content="HTTP">
<meta property="article:tag" content="Web Services">
<meta property="article:tag" content="API Design">
<meta property="article:tag" content="Express.js">
<meta property="article:tag" content="JSON">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- Monaco font override -->
    
<link rel="stylesheet" href="/css/monaco-override.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="ph4n4n&#39;s code notes &amp; tips" type="application/atom+xml" />
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/archives/">Trang chủ</a></li><!--
     --><!--
       --><li><a href="/Zero-to-hero-Series-Overview/">Zero to Hero</a></li><!--
     --><!--
       --><li><a href="/archives/">Bài viết</a></li><!--
     --><!--
       --><li><a href="/about/">Giới thiệu</a></li><!--
     --><!--
       --><li><a href="https://github.com/ph4n4n">Dự án</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" aria-label="Bài tiếp theo" href="/Zero-to-hero-gRPC/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Về đầu trang" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Chia sẻ bài viết" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Bài trước</span>
      <span id="i-next" class="info" style="display:none;">Bài tiếp theo</span>
      <span id="i-top" class="info" style="display:none;">Về đầu trang</span>
      <span id="i-share" class="info" style="display:none;">Chia sẻ bài viết</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&text=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&is_video=false&description=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn&body=Check out this article: https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&name=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&t=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Zero-to-Hero-RESTful-API-Thiet-ke-va-xay-dung-API-chuan"><span class="toc-number">1.</span> <span class="toc-text">Zero to Hero: RESTful API - Thiết kế và xây dựng API chuẩn</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Gioi-thieu-va-khai-niem-co-ban"><span class="toc-number">1.1.</span> <span class="toc-text">1. Giới thiệu và khái niệm cơ bản</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RESTful-API-la-gi"><span class="toc-number">1.1.1.</span> <span class="toc-text">RESTful API là gì?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dac-diem-chinh"><span class="toc-number">1.1.2.</span> <span class="toc-text">Đặc điểm chính:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lich-su-phat-trien"><span class="toc-number">1.1.3.</span> <span class="toc-text">Lịch sử phát triển:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REST-vs-SOAP-vs-GraphQL"><span class="toc-number">1.1.4.</span> <span class="toc-text">REST vs SOAP vs GraphQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-Methods-va-y-nghia"><span class="toc-number">1.1.5.</span> <span class="toc-text">HTTP Methods và ý nghĩa</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Cai-dat-va-setup-moi-truong"><span class="toc-number">1.2.</span> <span class="toc-text">2. Cài đặt và setup môi trường</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Development-Tools"><span class="toc-number">1.2.1.</span> <span class="toc-text">Development Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Project-Structure"><span class="toc-number">1.2.2.</span> <span class="toc-text">Project Structure</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Environment-Setup"><span class="toc-number">1.2.3.</span> <span class="toc-text">Environment Setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Database-Setup"><span class="toc-number">1.2.4.</span> <span class="toc-text">Database Setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Basic-Server-Setup"><span class="toc-number">1.2.5.</span> <span class="toc-text">Basic Server Setup</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Cu-phap-va-cau-truc-co-ban"><span class="toc-number">1.3.</span> <span class="toc-text">3. Cú pháp và cấu trúc cơ bản</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-Status-Codes"><span class="toc-number">1.3.1.</span> <span class="toc-text">HTTP Status Codes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Response-Format-Standards"><span class="toc-number">1.3.2.</span> <span class="toc-text">Response Format Standards</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL-Design-Patterns"><span class="toc-number">1.3.3.</span> <span class="toc-text">URL Design Patterns</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Query-Parameters"><span class="toc-number">1.3.4.</span> <span class="toc-text">Query Parameters</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Cac-tinh-nang-nang-cao"><span class="toc-number">1.4.</span> <span class="toc-text">4. Các tính năng nâng cao</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Authentication-Authorization"><span class="toc-number">1.4.1.</span> <span class="toc-text">Authentication &amp; Authorization</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Validation-Middleware"><span class="toc-number">1.4.2.</span> <span class="toc-text">Validation Middleware</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error-Handling"><span class="toc-number">1.4.3.</span> <span class="toc-text">Error Handling</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Caching-Strategy"><span class="toc-number">1.4.4.</span> <span class="toc-text">Caching Strategy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rate-Limiting"><span class="toc-number">1.4.5.</span> <span class="toc-text">Rate Limiting</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Best-practices-va-patterns"><span class="toc-number">1.5.</span> <span class="toc-text">5. Best practices và patterns</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#API-Versioning"><span class="toc-number">1.5.1.</span> <span class="toc-text">API Versioning</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Documentation-Standards"><span class="toc-number">1.5.2.</span> <span class="toc-text">Documentation Standards</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Security-Best-Practices"><span class="toc-number">1.5.3.</span> <span class="toc-text">Security Best Practices</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Performance-Optimization"><span class="toc-number">1.5.4.</span> <span class="toc-text">Performance Optimization</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Vi-du-thuc-te"><span class="toc-number">1.6.</span> <span class="toc-text">6. Ví dụ thực tế</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Complete-User-API"><span class="toc-number">1.6.1.</span> <span class="toc-text">Complete User API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Testing-API"><span class="toc-number">1.6.2.</span> <span class="toc-text">Testing API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Troubleshooting-va-tips"><span class="toc-number">1.7.</span> <span class="toc-text">7. Troubleshooting và tips</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Common-API-Issues"><span class="toc-number">1.7.1.</span> <span class="toc-text">Common API Issues</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Debugging-Techniques"><span class="toc-number">1.7.2.</span> <span class="toc-text">Debugging Techniques</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Performance-Monitoring"><span class="toc-number">1.7.3.</span> <span class="toc-text">Performance Monitoring</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Security-Best-Practices-1"><span class="toc-number">1.7.4.</span> <span class="toc-text">Security Best Practices</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Tai-lieu-tham-khao"><span class="toc-number">1.8.</span> <span class="toc-text">8. Tài liệu tham khảo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Official-Documentation"><span class="toc-number">1.8.1.</span> <span class="toc-text">Official Documentation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#API-Design-Guides"><span class="toc-number">1.8.2.</span> <span class="toc-text">API Design Guides</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Testing-Tools"><span class="toc-number">1.8.3.</span> <span class="toc-text">Testing Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Security-Resources"><span class="toc-number">1.8.4.</span> <span class="toc-text">Security Resources</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Performance-Tools"><span class="toc-number">1.8.5.</span> <span class="toc-text">Performance Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Monitoring-Logging"><span class="toc-number">1.8.6.</span> <span class="toc-text">Monitoring &amp; Logging</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Documentation-Tools"><span class="toc-number">1.8.7.</span> <span class="toc-text">Documentation Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Development-Tools-1"><span class="toc-number">1.8.8.</span> <span class="toc-text">Development Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deployment-Platforms"><span class="toc-number">1.8.9.</span> <span class="toc-text">Deployment Platforms</span></a></li></ol></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">ph4n4n</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2025-06-26T09:31:12.000Z" class="dt-published" itemprop="datePublished">2025-06-26</time>
        
        (Updated: <time datetime="2025-06-27T07:02:33.065Z" class="dt-updated" itemprop="dateModified">2025-06-27</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/Backend/">Backend</a> › <a class="category-link" href="/categories/Backend/API/">API</a> › <a class="category-link" href="/categories/Backend/API/Programming/">Programming</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/API-Design/" rel="tag">API Design</a>, <a class="p-category" href="/tags/Backend/" rel="tag">Backend</a>, <a class="p-category" href="/tags/Express-js/" rel="tag">Express.js</a>, <a class="p-category" href="/tags/HTTP/" rel="tag">HTTP</a>, <a class="p-category" href="/tags/JSON/" rel="tag">JSON</a>, <a class="p-category" href="/tags/Node-js/" rel="tag">Node.js</a>, <a class="p-category" href="/tags/RESTful-API/" rel="tag">RESTful API</a>, <a class="p-category" href="/tags/Web-Services/" rel="tag">Web Services</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h1 id="Zero-to-Hero-RESTful-API-Thiet-ke-va-xay-dung-API-chuan"><a href="#Zero-to-Hero-RESTful-API-Thiet-ke-va-xay-dung-API-chuan" class="headerlink" title="Zero to Hero: RESTful API - Thiết kế và xây dựng API chuẩn"></a>Zero to Hero: RESTful API - Thiết kế và xây dựng API chuẩn</h1><p>RESTful API là kiến trúc API phổ biến nhất hiện nay, sử dụng HTTP protocol để tạo ra các web services có thể mở rộng và dễ bảo trì.</p>
<h2 id="1-Gioi-thieu-va-khai-niem-co-ban"><a href="#1-Gioi-thieu-va-khai-niem-co-ban" class="headerlink" title="1. Giới thiệu và khái niệm cơ bản"></a>1. Giới thiệu và khái niệm cơ bản</h2><h3 id="RESTful-API-la-gi"><a href="#RESTful-API-la-gi" class="headerlink" title="RESTful API là gì?"></a>RESTful API là gì?</h3><p>REST (Representational State Transfer) là một kiến trúc phần mềm cho distributed systems, đặc biệt là World Wide Web. RESTful API tuân theo các nguyên tắc của REST.</p>
<h3 id="Dac-diem-chinh"><a href="#Dac-diem-chinh" class="headerlink" title="Đặc điểm chính:"></a>Đặc điểm chính:</h3><ul>
<li><strong>Stateless</strong>: Mỗi request độc lập, không lưu trạng thái</li>
<li><strong>Client-Server</strong>: Tách biệt client và server</li>
<li><strong>Cacheable</strong>: Có thể cache responses</li>
<li><strong>Uniform Interface</strong>: Giao diện thống nhất</li>
<li><strong>Layered System</strong>: Hệ thống phân lớp</li>
<li><strong>Code on Demand</strong>: Có thể tải code khi cần</li>
<li><strong>Resource-based</strong>: Dựa trên tài nguyên</li>
<li><strong>HTTP-based</strong>: Sử dụng HTTP protocol</li>
</ul>
<h3 id="Lich-su-phat-trien"><a href="#Lich-su-phat-trien" class="headerlink" title="Lịch sử phát triển:"></a>Lịch sử phát triển:</h3><ul>
<li><strong>2000</strong>: Roy Fielding giới thiệu REST trong luận án tiến sĩ</li>
<li><strong>2002</strong>: REST được áp dụng rộng rãi cho web services</li>
<li><strong>2006</strong>: REST trở thành chuẩn cho API design</li>
<li><strong>2010s</strong>: RESTful APIs trở thành chuẩn cho web development</li>
</ul>
<h3 id="REST-vs-SOAP-vs-GraphQL"><a href="#REST-vs-SOAP-vs-GraphQL" class="headerlink" title="REST vs SOAP vs GraphQL"></a>REST vs SOAP vs GraphQL</h3><table>
<thead>
<tr>
<th>Feature</th>
<th>REST</th>
<th>SOAP</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Protocol</strong></td>
<td>HTTP</td>
<td>HTTP&#x2F;SMTP</td>
<td>HTTP</td>
</tr>
<tr>
<td><strong>Data Format</strong></td>
<td>JSON&#x2F;XML</td>
<td>XML</td>
<td>JSON</td>
</tr>
<tr>
<td><strong>Over-fetching</strong></td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><strong>Under-fetching</strong></td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><strong>Caching</strong></td>
<td>Excellent</td>
<td>Limited</td>
<td>Good</td>
</tr>
<tr>
<td><strong>Learning Curve</strong></td>
<td>Easy</td>
<td>Hard</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Performance</strong></td>
<td>Good</td>
<td>Slow</td>
<td>Excellent</td>
</tr>
</tbody></table>
<h3 id="HTTP-Methods-va-y-nghia"><a href="#HTTP-Methods-va-y-nghia" class="headerlink" title="HTTP Methods và ý nghĩa"></a>HTTP Methods và ý nghĩa</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET     /api/users          # Lấy danh sách users (Read)</span><br><span class="line">GET     /api/users/123      # Lấy user có id=123 (Read)</span><br><span class="line">POST    /api/users          # Tạo user mới (Create)</span><br><span class="line">PUT     /api/users/123      # Cập nhật toàn bộ user (Update)</span><br><span class="line">PATCH   /api/users/123      # Cập nhật một phần user (Update)</span><br><span class="line">DELETE  /api/users/123      # Xóa user (Delete)</span><br><span class="line">HEAD    /api/users          # Lấy headers (Read metadata)</span><br><span class="line">OPTIONS /api/users          # Lấy available methods (Read options)</span><br></pre></td></tr></table></figure>

<h2 id="2-Cai-dat-va-setup-moi-truong"><a href="#2-Cai-dat-va-setup-moi-truong" class="headerlink" title="2. Cài đặt và setup môi trường"></a>2. Cài đặt và setup môi trường</h2><h3 id="Development-Tools"><a href="#Development-Tools" class="headerlink" title="Development Tools"></a>Development Tools</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Node.js và npm</span></span><br><span class="line">node --version</span><br><span class="line">npm --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># Package manager</span></span><br><span class="line">npm init -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Essential packages</span></span><br><span class="line">npm install express cors helmet express-rate-limit</span><br><span class="line">npm install express-validator joi</span><br><span class="line">npm install jsonwebtoken bcryptjs</span><br><span class="line">npm install dotenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># Development dependencies</span></span><br><span class="line">npm install --save-dev nodemon jest supertest</span><br><span class="line">npm install --save-dev eslint prettier</span><br><span class="line"></span><br><span class="line"><span class="comment"># API testing tools</span></span><br><span class="line">npm install -g postman</span><br><span class="line"><span class="comment"># hoặc sử dụng Insomnia, Thunder Client</span></span><br></pre></td></tr></table></figure>

<h3 id="Project-Structure"><a href="#Project-Structure" class="headerlink" title="Project Structure"></a>Project Structure</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">api-project/</span><br><span class="line">├── src/</span><br><span class="line">│   ├── controllers/</span><br><span class="line">│   │   ├── userController.js</span><br><span class="line">│   │   └── postController.js</span><br><span class="line">│   ├── models/</span><br><span class="line">│   │   ├── userModel.js</span><br><span class="line">│   │   └── postModel.js</span><br><span class="line">│   ├── routes/</span><br><span class="line">│   │   ├── userRoutes.js</span><br><span class="line">│   │   └── postRoutes.js</span><br><span class="line">│   ├── middleware/</span><br><span class="line">│   │   ├── auth.js</span><br><span class="line">│   │   ├── validation.js</span><br><span class="line">│   │   └── errorHandler.js</span><br><span class="line">│   ├── utils/</span><br><span class="line">│   │   ├── database.js</span><br><span class="line">│   │   └── logger.js</span><br><span class="line">│   ├── config/</span><br><span class="line">│   │   └── database.js</span><br><span class="line">│   └── app.js</span><br><span class="line">├── tests/</span><br><span class="line">│   ├── user.test.js</span><br><span class="line">│   └── post.test.js</span><br><span class="line">├── docs/</span><br><span class="line">│   └── api.md</span><br><span class="line">├── .env</span><br><span class="line">├── .gitignore</span><br><span class="line">├── package.json</span><br><span class="line">└── README.md</span><br></pre></td></tr></table></figure>

<h3 id="Environment-Setup"><a href="#Environment-Setup" class="headerlink" title="Environment Setup"></a>Environment Setup</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .env file</span></span><br><span class="line">NODE_ENV=development</span><br><span class="line">PORT=3000</span><br><span class="line">DATABASE_URL=mongodb://localhost:27017/myapi</span><br><span class="line">JWT_SECRET=your-secret-key</span><br><span class="line">JWT_EXPIRES_IN=7d</span><br><span class="line">RATE_LIMIT_WINDOW_MS=900000</span><br><span class="line">RATE_LIMIT_MAX=100</span><br><span class="line">CORS_ORIGIN=http://localhost:3000</span><br></pre></td></tr></table></figure>

<h3 id="Database-Setup"><a href="#Database-Setup" class="headerlink" title="Database Setup"></a>Database Setup</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config/database.js</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">connectDB</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> conn = <span class="keyword">await</span> mongoose.<span class="title function_">connect</span>(process.<span class="property">env</span>.<span class="property">DATABASE_URL</span>, &#123;</span><br><span class="line">      <span class="attr">useNewUrlParser</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">useUnifiedTopology</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`MongoDB Connected: <span class="subst">$&#123;conn.connection.host&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Database connection error:&#x27;</span>, error);</span><br><span class="line">    process.<span class="title function_">exit</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = connectDB;</span><br></pre></td></tr></table></figure>

<h3 id="Basic-Server-Setup"><a href="#Basic-Server-Setup" class="headerlink" title="Basic Server Setup"></a>Basic Server Setup</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> helmet = <span class="built_in">require</span>(<span class="string">&#x27;helmet&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> rateLimit = <span class="built_in">require</span>(<span class="string">&#x27;express-rate-limit&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> connectDB = <span class="built_in">require</span>(<span class="string">&#x27;./config/database&#x27;</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;dotenv&#x27;</span>).<span class="title function_">config</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect to database</span></span><br><span class="line"><span class="title function_">connectDB</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Security middleware</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">helmet</span>());</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>(&#123;</span><br><span class="line">  <span class="attr">origin</span>: process.<span class="property">env</span>.<span class="property">CORS_ORIGIN</span>,</span><br><span class="line">  <span class="attr">credentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rate limiting</span></span><br><span class="line"><span class="keyword">const</span> limiter = <span class="title function_">rateLimit</span>(&#123;</span><br><span class="line">  <span class="attr">windowMs</span>: <span class="built_in">parseInt</span>(process.<span class="property">env</span>.<span class="property">RATE_LIMIT_WINDOW_MS</span>) || <span class="number">15</span> * <span class="number">60</span> * <span class="number">1000</span>,</span><br><span class="line">  <span class="attr">max</span>: <span class="built_in">parseInt</span>(process.<span class="property">env</span>.<span class="property">RATE_LIMIT_MAX</span>) || <span class="number">100</span></span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">use</span>(limiter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Body parsing middleware</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>(&#123; <span class="attr">limit</span>: <span class="string">&#x27;10mb&#x27;</span> &#125;));</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">true</span> &#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Routes</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api/users&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;./routes/userRoutes&#x27;</span>));</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api/posts&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;./routes/postRoutes&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Health check</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/health&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;API is running&#x27;</span>,</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>()</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Error handling middleware</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="built_in">require</span>(<span class="string">&#x27;./middleware/errorHandler&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 404 handler</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;*&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">error</span>: &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;Route not found&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running on port <span class="subst">$&#123;PORT&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = app;</span><br></pre></td></tr></table></figure>

<h2 id="3-Cu-phap-va-cau-truc-co-ban"><a href="#3-Cu-phap-va-cau-truc-co-ban" class="headerlink" title="3. Cú pháp và cấu trúc cơ bản"></a>3. Cú pháp và cấu trúc cơ bản</h2><h3 id="HTTP-Status-Codes"><a href="#HTTP-Status-Codes" class="headerlink" title="HTTP Status Codes"></a>HTTP Status Codes</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2xx Success</span></span><br><span class="line"><span class="number">200</span>: <span class="string">&#x27;OK&#x27;</span>,                    <span class="comment">// Request thành công</span></span><br><span class="line"><span class="number">201</span>: <span class="string">&#x27;Created&#x27;</span>,               <span class="comment">// Tạo resource thành công</span></span><br><span class="line"><span class="number">202</span>: <span class="string">&#x27;Accepted&#x27;</span>,              <span class="comment">// Request được chấp nhận</span></span><br><span class="line"><span class="number">204</span>: <span class="string">&#x27;No Content&#x27;</span>,            <span class="comment">// Thành công nhưng không có content</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4xx Client Errors</span></span><br><span class="line"><span class="number">400</span>: <span class="string">&#x27;Bad Request&#x27;</span>,           <span class="comment">// Request không hợp lệ</span></span><br><span class="line"><span class="number">401</span>: <span class="string">&#x27;Unauthorized&#x27;</span>,          <span class="comment">// Chưa xác thực</span></span><br><span class="line"><span class="number">403</span>: <span class="string">&#x27;Forbidden&#x27;</span>,             <span class="comment">// Không có quyền truy cập</span></span><br><span class="line"><span class="number">404</span>: <span class="string">&#x27;Not Found&#x27;</span>,             <span class="comment">// Resource không tồn tại</span></span><br><span class="line"><span class="number">409</span>: <span class="string">&#x27;Conflict&#x27;</span>,              <span class="comment">// Xung đột dữ liệu</span></span><br><span class="line"><span class="number">422</span>: <span class="string">&#x27;Unprocessable Entity&#x27;</span>,  <span class="comment">// Dữ liệu không thể xử lý</span></span><br><span class="line"><span class="number">429</span>: <span class="string">&#x27;Too Many Requests&#x27;</span>,     <span class="comment">// Quá nhiều requests</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5xx Server Errors</span></span><br><span class="line"><span class="number">500</span>: <span class="string">&#x27;Internal Server Error&#x27;</span>, <span class="comment">// Lỗi server</span></span><br><span class="line"><span class="number">502</span>: <span class="string">&#x27;Bad Gateway&#x27;</span>,           <span class="comment">// Lỗi gateway</span></span><br><span class="line"><span class="number">503</span>: <span class="string">&#x27;Service Unavailable&#x27;</span>,   <span class="comment">// Service không khả dụng</span></span><br></pre></td></tr></table></figure>

<h3 id="Response-Format-Standards"><a href="#Response-Format-Standards" class="headerlink" title="Response Format Standards"></a>Response Format Standards</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Success Response</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="number">123</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;john@example.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;createdAt&quot;</span>: <span class="string">&quot;2024-01-27T10:30:00Z&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;User retrieved successfully&quot;</span>,</span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;2024-01-27T10:30:00Z&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Error Response</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;success&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="string">&quot;error&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;code&quot;</span>: <span class="string">&quot;VALIDATION_ERROR&quot;</span>,</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Validation failed&quot;</span>,</span><br><span class="line">    <span class="string">&quot;details&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;field&quot;</span>: <span class="string">&quot;email&quot;</span>,</span><br><span class="line">        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Email is required&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;2024-01-27T10:30:00Z&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Pagination Response</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: [...],</span><br><span class="line">  <span class="string">&quot;pagination&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;currentPage&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;totalPages&quot;</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="string">&quot;totalItems&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="string">&quot;itemsPerPage&quot;</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="string">&quot;hasNextPage&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;hasPrevPage&quot;</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;2024-01-27T10:30:00Z&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="URL-Design-Patterns"><a href="#URL-Design-Patterns" class="headerlink" title="URL Design Patterns"></a>URL Design Patterns</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ✅ Tốt - RESTful</span></span><br><span class="line"><span class="variable constant_">GET</span>    /api/users                    <span class="comment">// Lấy danh sách users</span></span><br><span class="line"><span class="variable constant_">GET</span>    /api/users/<span class="number">123</span>                <span class="comment">// Lấy user có id=123</span></span><br><span class="line"><span class="variable constant_">POST</span>   /api/users                    <span class="comment">// Tạo user mới</span></span><br><span class="line"><span class="variable constant_">PUT</span>    /api/users/<span class="number">123</span>                <span class="comment">// Cập nhật toàn bộ user</span></span><br><span class="line"><span class="variable constant_">PATCH</span>  /api/users/<span class="number">123</span>                <span class="comment">// Cập nhật một phần user</span></span><br><span class="line"><span class="variable constant_">DELETE</span> /api/users/<span class="number">123</span>                <span class="comment">// Xóa user</span></span><br><span class="line"></span><br><span class="line"><span class="variable constant_">GET</span>    /api/users/<span class="number">123</span>/posts          <span class="comment">// Lấy posts của user</span></span><br><span class="line"><span class="variable constant_">GET</span>    /api/users/<span class="number">123</span>/posts/<span class="number">456</span>      <span class="comment">// Lấy post cụ thể của user</span></span><br><span class="line"><span class="variable constant_">POST</span>   /api/users/<span class="number">123</span>/posts          <span class="comment">// Tạo post cho user</span></span><br><span class="line"></span><br><span class="line"><span class="variable constant_">GET</span>    /api/posts?category=tech      <span class="comment">// Filter posts</span></span><br><span class="line"><span class="variable constant_">GET</span>    /api/posts?page=<span class="number">2</span>&amp;limit=<span class="number">10</span>    <span class="comment">// Pagination</span></span><br><span class="line"><span class="variable constant_">GET</span>    /api/posts?search=javascript  <span class="comment">// Search posts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ❌ Không tốt - Không RESTful</span></span><br><span class="line"><span class="variable constant_">GET</span>    /api/getUsers</span><br><span class="line"><span class="variable constant_">POST</span>   /api/createUser</span><br><span class="line"><span class="variable constant_">PUT</span>    /api/updateUser/<span class="number">123</span></span><br><span class="line"><span class="variable constant_">DELETE</span> /api/deleteUser/<span class="number">123</span></span><br><span class="line"><span class="variable constant_">GET</span>    /api/userPosts/<span class="number">123</span></span><br></pre></td></tr></table></figure>

<h3 id="Query-Parameters"><a href="#Query-Parameters" class="headerlink" title="Query Parameters"></a>Query Parameters</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pagination</span></span><br><span class="line"><span class="variable constant_">GET</span> /api/users?page=<span class="number">1</span>&amp;limit=<span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Filtering</span></span><br><span class="line"><span class="variable constant_">GET</span> /api/users?status=active&amp;role=admin</span><br><span class="line"></span><br><span class="line"><span class="comment">// Sorting</span></span><br><span class="line"><span class="variable constant_">GET</span> /api/users?sort=name&amp;order=asc</span><br><span class="line"><span class="variable constant_">GET</span> /api/users?sort=createdAt&amp;order=desc</span><br><span class="line"></span><br><span class="line"><span class="comment">// Searching</span></span><br><span class="line"><span class="variable constant_">GET</span> /api/users?search=john</span><br><span class="line"><span class="variable constant_">GET</span> /api/users?q=john+doe</span><br><span class="line"></span><br><span class="line"><span class="comment">// Field selection</span></span><br><span class="line"><span class="variable constant_">GET</span> /api/users?fields=id,name,email</span><br><span class="line"></span><br><span class="line"><span class="comment">// Date range</span></span><br><span class="line"><span class="variable constant_">GET</span> /api/users?startDate=<span class="number">2024</span>-<span class="number">01</span>-<span class="number">01</span>&amp;endDate=<span class="number">2024</span>-<span class="number">01</span>-<span class="number">31</span></span><br></pre></td></tr></table></figure>

<h2 id="4-Cac-tinh-nang-nang-cao"><a href="#4-Cac-tinh-nang-nang-cao" class="headerlink" title="4. Các tính năng nâng cao"></a>4. Các tính năng nâng cao</h2><h3 id="Authentication-Authorization"><a href="#Authentication-Authorization" class="headerlink" title="Authentication &amp; Authorization"></a>Authentication &amp; Authorization</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// middleware/auth.js</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = <span class="built_in">require</span>(<span class="string">&#x27;../models/userModel&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">protect</span> = <span class="keyword">async</span> (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> token;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">headers</span>.<span class="property">authorization</span> &amp;&amp; req.<span class="property">headers</span>.<span class="property">authorization</span>.<span class="title function_">startsWith</span>(<span class="string">&#x27;Bearer&#x27;</span>)) &#123;</span><br><span class="line">      token = req.<span class="property">headers</span>.<span class="property">authorization</span>.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">error</span>: &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;Not authorized to access this route&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> decoded = jwt.<span class="title function_">verify</span>(token, process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>);</span><br><span class="line">    req.<span class="property">user</span> = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">findById</span>(decoded.<span class="property">id</span>).<span class="title function_">select</span>(<span class="string">&#x27;-password&#x27;</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">error</span>: &#123;</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;Not authorized to access this route&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">authorize</span> = (<span class="params">...roles</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!roles.<span class="title function_">includes</span>(req.<span class="property">user</span>.<span class="property">role</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">error</span>: &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;User role is not authorized&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; protect, authorize &#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Validation-Middleware"><a href="#Validation-Middleware" class="headerlink" title="Validation Middleware"></a>Validation Middleware</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// middleware/validation.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; body, validationResult &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-validator&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleValidationErrors</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> errors = <span class="title function_">validationResult</span>(req);</span><br><span class="line">  <span class="keyword">if</span> (!errors.<span class="title function_">isEmpty</span>()) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">422</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">error</span>: &#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;VALIDATION_ERROR&#x27;</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;Validation failed&#x27;</span>,</span><br><span class="line">        <span class="attr">details</span>: errors.<span class="title function_">array</span>().<span class="title function_">map</span>(<span class="function"><span class="params">error</span> =&gt;</span> (&#123;</span><br><span class="line">          <span class="attr">field</span>: error.<span class="property">path</span>,</span><br><span class="line">          <span class="attr">message</span>: error.<span class="property">msg</span>,</span><br><span class="line">          <span class="attr">value</span>: error.<span class="property">value</span></span><br><span class="line">        &#125;))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> validateUser = [</span><br><span class="line">  <span class="title function_">body</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">    .<span class="title function_">trim</span>()</span><br><span class="line">    .<span class="title function_">isLength</span>(&#123; <span class="attr">min</span>: <span class="number">2</span>, <span class="attr">max</span>: <span class="number">50</span> &#125;)</span><br><span class="line">    .<span class="title function_">withMessage</span>(<span class="string">&#x27;Name must be between 2 and 50 characters&#x27;</span>),</span><br><span class="line">  <span class="title function_">body</span>(<span class="string">&#x27;email&#x27;</span>)</span><br><span class="line">    .<span class="title function_">isEmail</span>()</span><br><span class="line">    .<span class="title function_">normalizeEmail</span>()</span><br><span class="line">    .<span class="title function_">withMessage</span>(<span class="string">&#x27;Valid email is required&#x27;</span>),</span><br><span class="line">  <span class="title function_">body</span>(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">    .<span class="title function_">isLength</span>(&#123; <span class="attr">min</span>: <span class="number">6</span> &#125;)</span><br><span class="line">    .<span class="title function_">withMessage</span>(<span class="string">&#x27;Password must be at least 6 characters&#x27;</span>),</span><br><span class="line">  handleValidationErrors</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> validatePost = [</span><br><span class="line">  <span class="title function_">body</span>(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">    .<span class="title function_">trim</span>()</span><br><span class="line">    .<span class="title function_">isLength</span>(&#123; <span class="attr">min</span>: <span class="number">5</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;)</span><br><span class="line">    .<span class="title function_">withMessage</span>(<span class="string">&#x27;Title must be between 5 and 100 characters&#x27;</span>),</span><br><span class="line">  <span class="title function_">body</span>(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">    .<span class="title function_">trim</span>()</span><br><span class="line">    .<span class="title function_">isLength</span>(&#123; <span class="attr">min</span>: <span class="number">10</span> &#125;)</span><br><span class="line">    .<span class="title function_">withMessage</span>(<span class="string">&#x27;Content must be at least 10 characters&#x27;</span>),</span><br><span class="line">  handleValidationErrors</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  validateUser,</span><br><span class="line">  validatePost,</span><br><span class="line">  handleValidationErrors</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Error-Handling"><a href="#Error-Handling" class="headerlink" title="Error Handling"></a>Error Handling</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// middleware/errorHandler.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">errorHandler</span> = (<span class="params">err, req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> error = &#123; ...err &#125;;</span><br><span class="line">  error.<span class="property">message</span> = err.<span class="property">message</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Log error</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Mongoose bad ObjectId</span></span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&#x27;CastError&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> message = <span class="string">&#x27;Resource not found&#x27;</span>;</span><br><span class="line">    error = &#123; message, <span class="attr">statusCode</span>: <span class="number">404</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Mongoose duplicate key</span></span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">code</span> === <span class="number">11000</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> message = <span class="string">&#x27;Duplicate field value entered&#x27;</span>;</span><br><span class="line">    error = &#123; message, <span class="attr">statusCode</span>: <span class="number">400</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Mongoose validation error</span></span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&#x27;ValidationError&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> message = <span class="title class_">Object</span>.<span class="title function_">values</span>(err.<span class="property">errors</span>).<span class="title function_">map</span>(<span class="function"><span class="params">val</span> =&gt;</span> val.<span class="property">message</span>).<span class="title function_">join</span>(<span class="string">&#x27;, &#x27;</span>);</span><br><span class="line">    error = &#123; message, <span class="attr">statusCode</span>: <span class="number">400</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">status</span>(error.<span class="property">statusCode</span> || <span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">error</span>: &#123;</span><br><span class="line">      <span class="attr">message</span>: error.<span class="property">message</span> || <span class="string">&#x27;Server Error&#x27;</span>,</span><br><span class="line">      ...(process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;development&#x27;</span> &amp;&amp; &#123; <span class="attr">stack</span>: err.<span class="property">stack</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = errorHandler;</span><br></pre></td></tr></table></figure>

<h3 id="Caching-Strategy"><a href="#Caching-Strategy" class="headerlink" title="Caching Strategy"></a>Caching Strategy</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// middleware/cache.js</span></span><br><span class="line"><span class="keyword">const</span> redis = <span class="built_in">require</span>(<span class="string">&#x27;redis&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> client = redis.<span class="title function_">createClient</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">cache</span> = (<span class="params">duration</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> key = <span class="string">`cache:<span class="subst">$&#123;req.originalUrl&#125;</span>`</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> cachedData = <span class="keyword">await</span> client.<span class="title function_">get</span>(key);</span><br><span class="line">      <span class="keyword">if</span> (cachedData) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.<span class="title function_">json</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(cachedData));</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// Store original send function</span></span><br><span class="line">      <span class="keyword">const</span> originalSend = res.<span class="property">json</span>;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// Override send function</span></span><br><span class="line">      res.<span class="property">json</span> = <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">        client.<span class="title function_">setex</span>(key, duration, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">        originalSend.<span class="title function_">call</span>(<span class="variable language_">this</span>, data);</span><br><span class="line">      &#125;;</span><br><span class="line">      </span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = cache;</span><br></pre></td></tr></table></figure>

<h3 id="Rate-Limiting"><a href="#Rate-Limiting" class="headerlink" title="Rate Limiting"></a>Rate Limiting</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// middleware/rateLimit.js</span></span><br><span class="line"><span class="keyword">const</span> rateLimit = <span class="built_in">require</span>(<span class="string">&#x27;express-rate-limit&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createRateLimiter</span> = (<span class="params">windowMs, max, message</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">rateLimit</span>(&#123;</span><br><span class="line">    windowMs,</span><br><span class="line">    max,</span><br><span class="line">    <span class="attr">message</span>: &#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">error</span>: &#123;</span><br><span class="line">        <span class="attr">message</span>: message || <span class="string">&#x27;Too many requests from this IP&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">standardHeaders</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">legacyHeaders</span>: <span class="literal">false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> authLimiter = <span class="title function_">createRateLimiter</span>(</span><br><span class="line">  <span class="number">15</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="comment">// 15 minutes</span></span><br><span class="line">  <span class="number">5</span>, <span class="comment">// 5 requests per window</span></span><br><span class="line">  <span class="string">&#x27;Too many login attempts, please try again later&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> apiLimiter = <span class="title function_">createRateLimiter</span>(</span><br><span class="line">  <span class="number">15</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="comment">// 15 minutes</span></span><br><span class="line">  <span class="number">100</span> <span class="comment">// 100 requests per window</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; authLimiter, apiLimiter &#125;;</span><br></pre></td></tr></table></figure>

<h2 id="5-Best-practices-va-patterns"><a href="#5-Best-practices-va-patterns" class="headerlink" title="5. Best practices và patterns"></a>5. Best practices và patterns</h2><h3 id="API-Versioning"><a href="#API-Versioning" class="headerlink" title="API Versioning"></a>API Versioning</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Versioning strategies</span></span><br><span class="line"><span class="comment">// 1. URL Versioning</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api/v1/users&#x27;</span>, userRoutesV1);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api/v2/users&#x27;</span>, userRoutesV2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Header Versioning</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api/users&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> version = req.<span class="property">headers</span>[<span class="string">&#x27;api-version&#x27;</span>] || <span class="string">&#x27;v1&#x27;</span>;</span><br><span class="line">  req.<span class="property">apiVersion</span> = version;</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Query Parameter Versioning</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api/users&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> version = req.<span class="property">query</span>.<span class="property">version</span> || <span class="string">&#x27;v1&#x27;</span>;</span><br><span class="line">  req.<span class="property">apiVersion</span> = version;</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Version-specific routes</span></span><br><span class="line"><span class="keyword">const</span> userRoutesV1 = <span class="built_in">require</span>(<span class="string">&#x27;./routes/v1/userRoutes&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> userRoutesV2 = <span class="built_in">require</span>(<span class="string">&#x27;./routes/v2/userRoutes&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Documentation-Standards"><a href="#Documentation-Standards" class="headerlink" title="Documentation Standards"></a>Documentation Standards</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Using JSDoc for API documentation</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@api</span> &#123;<span class="type">get</span>&#125; /api/users Get all users</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiName</span> <span class="variable">GetUsers</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiGroup</span> <span class="variable">User</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiVersion</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiParam</span> &#123;<span class="type">Number</span>&#125; [page=1] Page number</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiParam</span> &#123;<span class="type">Number</span>&#125; [limit=10] Items per page</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiParam</span> &#123;<span class="type">String</span>&#125; [search] Search term</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiSuccess</span> &#123;<span class="type">Boolean</span>&#125; success Success status</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiSuccess</span> &#123;<span class="type">Object[]</span>&#125; data Array of users</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiSuccess</span> &#123;<span class="type">Number</span>&#125; data.id User ID</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiSuccess</span> &#123;<span class="type">String</span>&#125; data.name User name</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiSuccess</span> &#123;<span class="type">String</span>&#125; data.email User email</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiSuccessExample</span> &#123;<span class="type">json</span>&#125; <span class="variable">Success</span>-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 200 OK</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       &quot;success&quot;: true,</span></span><br><span class="line"><span class="comment"> *       &quot;data&quot;: [</span></span><br><span class="line"><span class="comment"> *         &#123;</span></span><br><span class="line"><span class="comment"> *           &quot;id&quot;: 1,</span></span><br><span class="line"><span class="comment"> *           &quot;name&quot;: &quot;John Doe&quot;,</span></span><br><span class="line"><span class="comment"> *           &quot;email&quot;: &quot;john<span class="doctag">@example</span>.com&quot;</span></span><br><span class="line"><span class="comment"> *         &#125;</span></span><br><span class="line"><span class="comment"> *       ]</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, userController.<span class="property">getUsers</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Security-Best-Practices"><a href="#Security-Best-Practices" class="headerlink" title="Security Best Practices"></a>Security Best Practices</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Security headers</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">helmet</span>(&#123;</span><br><span class="line">  <span class="attr">contentSecurityPolicy</span>: &#123;</span><br><span class="line">    <span class="attr">directives</span>: &#123;</span><br><span class="line">      <span class="attr">defaultSrc</span>: [<span class="string">&quot;&#x27;self&#x27;&quot;</span>],</span><br><span class="line">      <span class="attr">styleSrc</span>: [<span class="string">&quot;&#x27;self&#x27;&quot;</span>, <span class="string">&quot;&#x27;unsafe-inline&#x27;&quot;</span>],</span><br><span class="line">      <span class="attr">scriptSrc</span>: [<span class="string">&quot;&#x27;self&#x27;&quot;</span>],</span><br><span class="line">      <span class="attr">imgSrc</span>: [<span class="string">&quot;&#x27;self&#x27;&quot;</span>, <span class="string">&quot;data:&quot;</span>, <span class="string">&quot;https:&quot;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">hsts</span>: &#123;</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">31536000</span>,</span><br><span class="line">    <span class="attr">includeSubDomains</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">preload</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// CORS configuration</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>(&#123;</span><br><span class="line">  <span class="attr">origin</span>: process.<span class="property">env</span>.<span class="property">ALLOWED_ORIGINS</span>?.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>) || [<span class="string">&#x27;http://localhost:3000&#x27;</span>],</span><br><span class="line">  <span class="attr">credentials</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">methods</span>: [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;PUT&#x27;</span>, <span class="string">&#x27;DELETE&#x27;</span>, <span class="string">&#x27;PATCH&#x27;</span>],</span><br><span class="line">  <span class="attr">allowedHeaders</span>: [<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;Authorization&#x27;</span>]</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Input sanitization</span></span><br><span class="line"><span class="keyword">const</span> xss = <span class="built_in">require</span>(<span class="string">&#x27;xss-clean&#x27;</span>);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">xss</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// Prevent parameter pollution</span></span><br><span class="line"><span class="keyword">const</span> hpp = <span class="built_in">require</span>(<span class="string">&#x27;hpp&#x27;</span>);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">hpp</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// SQL injection prevention (if using SQL)</span></span><br><span class="line"><span class="comment">// Use parameterized queries and ORM</span></span><br></pre></td></tr></table></figure>

<h3 id="Performance-Optimization"><a href="#Performance-Optimization" class="headerlink" title="Performance Optimization"></a>Performance Optimization</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Database indexing</span></span><br><span class="line"><span class="comment">// models/userModel.js</span></span><br><span class="line"><span class="keyword">const</span> userSchema = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">  <span class="attr">email</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">unique</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">index</span>: <span class="literal">true</span> <span class="comment">// Create index for faster queries</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">name</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">index</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">createdAt</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Date</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="title class_">Date</span>.<span class="property">now</span>,</span><br><span class="line">    <span class="attr">index</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Query optimization</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getUsers</span> = <span class="keyword">async</span> (<span class="params">req, res</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; page = <span class="number">1</span>, limit = <span class="number">10</span>, search, sort = <span class="string">&#x27;createdAt&#x27;</span>, order = <span class="string">&#x27;desc&#x27;</span> &#125; = req.<span class="property">query</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Build query</span></span><br><span class="line">    <span class="keyword">const</span> query = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (search) &#123;</span><br><span class="line">      query.<span class="property">$or</span> = [</span><br><span class="line">        &#123; <span class="attr">name</span>: &#123; <span class="attr">$regex</span>: search, <span class="attr">$options</span>: <span class="string">&#x27;i&#x27;</span> &#125; &#125;,</span><br><span class="line">        &#123; <span class="attr">email</span>: &#123; <span class="attr">$regex</span>: search, <span class="attr">$options</span>: <span class="string">&#x27;i&#x27;</span> &#125; &#125;</span><br><span class="line">      ];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Execute query with pagination</span></span><br><span class="line">    <span class="keyword">const</span> users = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">find</span>(query)</span><br><span class="line">      .<span class="title function_">select</span>(<span class="string">&#x27;-password&#x27;</span>) <span class="comment">// Exclude password field</span></span><br><span class="line">      .<span class="title function_">sort</span>(&#123; [sort]: order === <span class="string">&#x27;desc&#x27;</span> ? -<span class="number">1</span> : <span class="number">1</span> &#125;)</span><br><span class="line">      .<span class="title function_">limit</span>(<span class="built_in">parseInt</span>(limit))</span><br><span class="line">      .<span class="title function_">skip</span>((<span class="built_in">parseInt</span>(page) - <span class="number">1</span>) * <span class="built_in">parseInt</span>(limit))</span><br><span class="line">      .<span class="title function_">lean</span>(); <span class="comment">// Convert to plain JavaScript object for better performance</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> total = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">countDocuments</span>(query);</span><br><span class="line">    </span><br><span class="line">    res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">data</span>: users,</span><br><span class="line">      <span class="attr">pagination</span>: &#123;</span><br><span class="line">        <span class="attr">currentPage</span>: <span class="built_in">parseInt</span>(page),</span><br><span class="line">        <span class="attr">totalPages</span>: <span class="title class_">Math</span>.<span class="title function_">ceil</span>(total / limit),</span><br><span class="line">        <span class="attr">totalItems</span>: total,</span><br><span class="line">        <span class="attr">itemsPerPage</span>: <span class="built_in">parseInt</span>(limit)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="6-Vi-du-thuc-te"><a href="#6-Vi-du-thuc-te" class="headerlink" title="6. Ví dụ thực tế"></a>6. Ví dụ thực tế</h2><h3 id="Complete-User-API"><a href="#Complete-User-API" class="headerlink" title="Complete User API"></a>Complete User API</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// models/userModel.js</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcryptjs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userSchema = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">required</span>: [<span class="literal">true</span>, <span class="string">&#x27;Name is required&#x27;</span>],</span><br><span class="line">    <span class="attr">trim</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">maxlength</span>: [<span class="number">50</span>, <span class="string">&#x27;Name cannot be more than 50 characters&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">email</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">required</span>: [<span class="literal">true</span>, <span class="string">&#x27;Email is required&#x27;</span>],</span><br><span class="line">    <span class="attr">unique</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">lowercase</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">match</span>: [<span class="regexp">/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w&#123;2,3&#125;)+$/</span>, <span class="string">&#x27;Please enter a valid email&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">password</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">required</span>: [<span class="literal">true</span>, <span class="string">&#x27;Password is required&#x27;</span>],</span><br><span class="line">    <span class="attr">minlength</span>: [<span class="number">6</span>, <span class="string">&#x27;Password must be at least 6 characters&#x27;</span>],</span><br><span class="line">    <span class="attr">select</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">role</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">enum</span>: [<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;admin&#x27;</span>],</span><br><span class="line">    <span class="attr">default</span>: <span class="string">&#x27;user&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">isActive</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">avatar</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="string">&#x27;default-avatar.jpg&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">timestamps</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Hash password before saving</span></span><br><span class="line">userSchema.<span class="title function_">pre</span>(<span class="string">&#x27;save&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">next</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">isModified</span>(<span class="string">&#x27;password&#x27;</span>)) &#123;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> salt = <span class="keyword">await</span> bcrypt.<span class="title function_">genSalt</span>(<span class="number">10</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">password</span> = <span class="keyword">await</span> bcrypt.<span class="title function_">hash</span>(<span class="variable language_">this</span>.<span class="property">password</span>, salt);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Compare password method</span></span><br><span class="line">userSchema.<span class="property">methods</span>.<span class="property">matchPassword</span> = <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">enteredPassword</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> bcrypt.<span class="title function_">compare</span>(enteredPassword, <span class="variable language_">this</span>.<span class="property">password</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;User&#x27;</span>, userSchema);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// controllers/userController.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = <span class="built_in">require</span>(<span class="string">&#x27;../models/userModel&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate JWT Token</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">generateToken</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> jwt.<span class="title function_">sign</span>(&#123; id &#125;, process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>, &#123;</span><br><span class="line">    <span class="attr">expiresIn</span>: process.<span class="property">env</span>.<span class="property">JWT_EXPIRES_IN</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @desc    Register user</span></span><br><span class="line"><span class="comment">// @route   POST /api/users/register</span></span><br><span class="line"><span class="comment">// @access  Public</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">registerUser</span> = <span class="keyword">async</span> (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; name, email, password &#125; = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check if user exists</span></span><br><span class="line">    <span class="keyword">const</span> userExists = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">findOne</span>(&#123; email &#125;);</span><br><span class="line">    <span class="keyword">if</span> (userExists) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">error</span>: &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;User already exists&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create user</span></span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">      name,</span><br><span class="line">      email,</span><br><span class="line">      password</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Generate token</span></span><br><span class="line">    <span class="keyword">const</span> token = <span class="title function_">generateToken</span>(user.<span class="property">_id</span>);</span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: user.<span class="property">_id</span>,</span><br><span class="line">        <span class="attr">name</span>: user.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">email</span>: user.<span class="property">email</span>,</span><br><span class="line">        <span class="attr">role</span>: user.<span class="property">role</span></span><br><span class="line">      &#125;,</span><br><span class="line">      token,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;User registered successfully&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @desc    Login user</span></span><br><span class="line"><span class="comment">// @route   POST /api/users/login</span></span><br><span class="line"><span class="comment">// @access  Public</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">loginUser</span> = <span class="keyword">async</span> (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; email, password &#125; = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check for user</span></span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">findOne</span>(&#123; email &#125;).<span class="title function_">select</span>(<span class="string">&#x27;+password&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">error</span>: &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;Invalid credentials&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check if password matches</span></span><br><span class="line">    <span class="keyword">const</span> isMatch = <span class="keyword">await</span> user.<span class="title function_">matchPassword</span>(password);</span><br><span class="line">    <span class="keyword">if</span> (!isMatch) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">error</span>: &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;Invalid credentials&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Generate token</span></span><br><span class="line">    <span class="keyword">const</span> token = <span class="title function_">generateToken</span>(user.<span class="property">_id</span>);</span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: user.<span class="property">_id</span>,</span><br><span class="line">        <span class="attr">name</span>: user.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">email</span>: user.<span class="property">email</span>,</span><br><span class="line">        <span class="attr">role</span>: user.<span class="property">role</span></span><br><span class="line">      &#125;,</span><br><span class="line">      token,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;User logged in successfully&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @desc    Get current user</span></span><br><span class="line"><span class="comment">// @route   GET /api/users/me</span></span><br><span class="line"><span class="comment">// @access  Private</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getMe</span> = <span class="keyword">async</span> (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">findById</span>(req.<span class="property">user</span>.<span class="property">id</span>);</span><br><span class="line">    res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">data</span>: user,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;User retrieved successfully&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @desc    Get all users</span></span><br><span class="line"><span class="comment">// @route   GET /api/users</span></span><br><span class="line"><span class="comment">// @access  Private</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getUsers</span> = <span class="keyword">async</span> (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; page = <span class="number">1</span>, limit = <span class="number">10</span>, search, sort = <span class="string">&#x27;createdAt&#x27;</span>, order = <span class="string">&#x27;desc&#x27;</span> &#125; = req.<span class="property">query</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Build query</span></span><br><span class="line">    <span class="keyword">const</span> query = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (search) &#123;</span><br><span class="line">      query.<span class="property">$or</span> = [</span><br><span class="line">        &#123; <span class="attr">name</span>: &#123; <span class="attr">$regex</span>: search, <span class="attr">$options</span>: <span class="string">&#x27;i&#x27;</span> &#125; &#125;,</span><br><span class="line">        &#123; <span class="attr">email</span>: &#123; <span class="attr">$regex</span>: search, <span class="attr">$options</span>: <span class="string">&#x27;i&#x27;</span> &#125; &#125;</span><br><span class="line">      ];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Execute query</span></span><br><span class="line">    <span class="keyword">const</span> users = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">find</span>(query)</span><br><span class="line">      .<span class="title function_">select</span>(<span class="string">&#x27;-password&#x27;</span>)</span><br><span class="line">      .<span class="title function_">sort</span>(&#123; [sort]: order === <span class="string">&#x27;desc&#x27;</span> ? -<span class="number">1</span> : <span class="number">1</span> &#125;)</span><br><span class="line">      .<span class="title function_">limit</span>(<span class="built_in">parseInt</span>(limit))</span><br><span class="line">      .<span class="title function_">skip</span>((<span class="built_in">parseInt</span>(page) - <span class="number">1</span>) * <span class="built_in">parseInt</span>(limit))</span><br><span class="line">      .<span class="title function_">lean</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> total = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">countDocuments</span>(query);</span><br><span class="line">    </span><br><span class="line">    res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">data</span>: users,</span><br><span class="line">      <span class="attr">pagination</span>: &#123;</span><br><span class="line">        <span class="attr">currentPage</span>: <span class="built_in">parseInt</span>(page),</span><br><span class="line">        <span class="attr">totalPages</span>: <span class="title class_">Math</span>.<span class="title function_">ceil</span>(total / limit),</span><br><span class="line">        <span class="attr">totalItems</span>: total,</span><br><span class="line">        <span class="attr">itemsPerPage</span>: <span class="built_in">parseInt</span>(limit)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @desc    Update user</span></span><br><span class="line"><span class="comment">// @route   PUT /api/users/:id</span></span><br><span class="line"><span class="comment">// @access  Private</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">updateUser</span> = <span class="keyword">async</span> (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = req.<span class="property">params</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; name, email, role &#125; = req.<span class="property">body</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Check if user exists</span></span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">findById</span>(id);</span><br><span class="line">    <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">error</span>: &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;User not found&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Update user</span></span><br><span class="line">    <span class="keyword">const</span> updatedUser = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">findByIdAndUpdate</span>(</span><br><span class="line">      id,</span><br><span class="line">      &#123; name, email, role &#125;,</span><br><span class="line">      &#123; <span class="attr">new</span>: <span class="literal">true</span>, <span class="attr">runValidators</span>: <span class="literal">true</span> &#125;</span><br><span class="line">    ).<span class="title function_">select</span>(<span class="string">&#x27;-password&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">data</span>: updatedUser,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;User updated successfully&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @desc    Delete user</span></span><br><span class="line"><span class="comment">// @route   DELETE /api/users/:id</span></span><br><span class="line"><span class="comment">// @access  Private/Admin</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">deleteUser</span> = <span class="keyword">async</span> (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = req.<span class="property">params</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">findById</span>(id);</span><br><span class="line">    <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">error</span>: &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;User not found&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">findByIdAndDelete</span>(id);</span><br><span class="line">    </span><br><span class="line">    res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;User deleted successfully&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  registerUser,</span><br><span class="line">  loginUser,</span><br><span class="line">  getMe,</span><br><span class="line">  getUsers,</span><br><span class="line">  updateUser,</span><br><span class="line">  deleteUser</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// routes/userRoutes.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"><span class="keyword">const</span> &#123; protect, authorize &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../middleware/auth&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; validateUser &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../middleware/validation&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  registerUser,</span><br><span class="line">  loginUser,</span><br><span class="line">  getMe,</span><br><span class="line">  getUsers,</span><br><span class="line">  updateUser,</span><br><span class="line">  deleteUser</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">&#x27;../controllers/userController&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Public routes</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/register&#x27;</span>, validateUser, registerUser);</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, loginUser);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Protected routes</span></span><br><span class="line">router.<span class="title function_">use</span>(protect); <span class="comment">// All routes after this middleware are protected</span></span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/me&#x27;</span>, getMe);</span><br><span class="line">router.<span class="title function_">put</span>(<span class="string">&#x27;/:id&#x27;</span>, validateUser, updateUser);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Admin routes</span></span><br><span class="line">router.<span class="title function_">use</span>(<span class="title function_">authorize</span>(<span class="string">&#x27;admin&#x27;</span>)); <span class="comment">// All routes after this middleware require admin role</span></span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, getUsers);</span><br><span class="line">router.<span class="title function_">delete</span>(<span class="string">&#x27;/:id&#x27;</span>, deleteUser);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router;</span><br></pre></td></tr></table></figure>

<h3 id="Testing-API"><a href="#Testing-API" class="headerlink" title="Testing API"></a>Testing API</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tests/user.test.js</span></span><br><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">&#x27;supertest&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="built_in">require</span>(<span class="string">&#x27;../src/app&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = <span class="built_in">require</span>(<span class="string">&#x27;../src/models/userModel&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;User API&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">beforeAll</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> mongoose.<span class="title function_">connect</span>(process.<span class="property">env</span>.<span class="property">MONGODB_URI_TEST</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">afterAll</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">deleteMany</span>(&#123;&#125;);</span><br><span class="line">    <span class="keyword">await</span> mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">deleteMany</span>(&#123;&#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">describe</span>(<span class="string">&#x27;POST /api/users/register&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&#x27;should register a new user&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> userData = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;John Doe&#x27;</span>,</span><br><span class="line">        <span class="attr">email</span>: <span class="string">&#x27;john@example.com&#x27;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&#x27;password123&#x27;</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">        .<span class="title function_">post</span>(<span class="string">&#x27;/api/users/register&#x27;</span>)</span><br><span class="line">        .<span class="title function_">send</span>(userData)</span><br><span class="line">        .<span class="title function_">expect</span>(<span class="number">201</span>);</span><br><span class="line"></span><br><span class="line">      <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">success</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>);</span><br><span class="line">      <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">data</span>.<span class="property">name</span>).<span class="title function_">toBe</span>(userData.<span class="property">name</span>);</span><br><span class="line">      <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">data</span>.<span class="property">email</span>).<span class="title function_">toBe</span>(userData.<span class="property">email</span>);</span><br><span class="line">      <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">token</span>).<span class="title function_">toBeDefined</span>();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&#x27;should not register user with existing email&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> userData = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;John Doe&#x27;</span>,</span><br><span class="line">        <span class="attr">email</span>: <span class="string">&#x27;john@example.com&#x27;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&#x27;password123&#x27;</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">create</span>(userData);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">        .<span class="title function_">post</span>(<span class="string">&#x27;/api/users/register&#x27;</span>)</span><br><span class="line">        .<span class="title function_">send</span>(userData)</span><br><span class="line">        .<span class="title function_">expect</span>(<span class="number">400</span>);</span><br><span class="line"></span><br><span class="line">      <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">success</span>).<span class="title function_">toBe</span>(<span class="literal">false</span>);</span><br><span class="line">      <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">error</span>.<span class="property">message</span>).<span class="title function_">toBe</span>(<span class="string">&#x27;User already exists&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">describe</span>(<span class="string">&#x27;POST /api/users/login&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&#x27;should login with valid credentials&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> userData = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;John Doe&#x27;</span>,</span><br><span class="line">        <span class="attr">email</span>: <span class="string">&#x27;john@example.com&#x27;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&#x27;password123&#x27;</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">create</span>(userData);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">        .<span class="title function_">post</span>(<span class="string">&#x27;/api/users/login&#x27;</span>)</span><br><span class="line">        .<span class="title function_">send</span>(&#123;</span><br><span class="line">          <span class="attr">email</span>: userData.<span class="property">email</span>,</span><br><span class="line">          <span class="attr">password</span>: userData.<span class="property">password</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">expect</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">      <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">success</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>);</span><br><span class="line">      <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">token</span>).<span class="title function_">toBeDefined</span>();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&#x27;should not login with invalid credentials&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">        .<span class="title function_">post</span>(<span class="string">&#x27;/api/users/login&#x27;</span>)</span><br><span class="line">        .<span class="title function_">send</span>(&#123;</span><br><span class="line">          <span class="attr">email</span>: <span class="string">&#x27;invalid@example.com&#x27;</span>,</span><br><span class="line">          <span class="attr">password</span>: <span class="string">&#x27;wrongpassword&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">expect</span>(<span class="number">401</span>);</span><br><span class="line"></span><br><span class="line">      <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">success</span>).<span class="title function_">toBe</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="7-Troubleshooting-va-tips"><a href="#7-Troubleshooting-va-tips" class="headerlink" title="7. Troubleshooting và tips"></a>7. Troubleshooting và tips</h2><h3 id="Common-API-Issues"><a href="#Common-API-Issues" class="headerlink" title="Common API Issues"></a>Common API Issues</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. CORS Issues</span></span><br><span class="line"><span class="comment">// Solution: Configure CORS properly</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>(&#123;</span><br><span class="line">  <span class="attr">origin</span>: [<span class="string">&#x27;http://localhost:3000&#x27;</span>, <span class="string">&#x27;https://yourdomain.com&#x27;</span>],</span><br><span class="line">  <span class="attr">credentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Authentication Issues</span></span><br><span class="line"><span class="comment">// Solution: Check token format and expiration</span></span><br><span class="line"><span class="keyword">const</span> token = req.<span class="property">headers</span>.<span class="property">authorization</span>?.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">if</span> (!token) &#123;</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&#x27;No token provided&#x27;</span> &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Validation Issues</span></span><br><span class="line"><span class="comment">// Solution: Use proper validation middleware</span></span><br><span class="line"><span class="keyword">const</span> &#123; body, validationResult &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-validator&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. Database Connection Issues</span></span><br><span class="line"><span class="comment">// Solution: Add connection error handling</span></span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;MongoDB connection error:&#x27;</span>, err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. Rate Limiting Issues</span></span><br><span class="line"><span class="comment">// Solution: Implement proper rate limiting</span></span><br><span class="line"><span class="keyword">const</span> rateLimit = <span class="built_in">require</span>(<span class="string">&#x27;express-rate-limit&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Debugging-Techniques"><a href="#Debugging-Techniques" class="headerlink" title="Debugging Techniques"></a>Debugging Techniques</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Request Logging</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;req.method&#125;</span> <span class="subst">$&#123;req.url&#125;</span> - <span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().toISOString()&#125;</span>`</span>);</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Response Time Logging</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> start = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">  res.<span class="title function_">on</span>(<span class="string">&#x27;finish&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> duration = <span class="title class_">Date</span>.<span class="title function_">now</span>() - start;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;req.method&#125;</span> <span class="subst">$&#123;req.url&#125;</span> - <span class="subst">$&#123;res.statusCode&#125;</span> - <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Error Logging</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">message</span>: err.<span class="property">message</span>,</span><br><span class="line">    <span class="attr">stack</span>: err.<span class="property">stack</span>,</span><br><span class="line">    <span class="attr">url</span>: req.<span class="property">url</span>,</span><br><span class="line">    <span class="attr">method</span>: req.<span class="property">method</span>,</span><br><span class="line">    <span class="attr">body</span>: req.<span class="property">body</span>,</span><br><span class="line">    <span class="attr">user</span>: req.<span class="property">user</span>?.<span class="property">id</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="title function_">next</span>(err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. Database Query Logging</span></span><br><span class="line">mongoose.<span class="title function_">set</span>(<span class="string">&#x27;debug&#x27;</span>, process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;development&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Performance-Monitoring"><a href="#Performance-Monitoring" class="headerlink" title="Performance Monitoring"></a>Performance Monitoring</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Response Time Monitoring</span></span><br><span class="line"><span class="keyword">const</span> responseTime = <span class="built_in">require</span>(<span class="string">&#x27;response-time&#x27;</span>);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">responseTime</span>(<span class="function">(<span class="params">req, res, time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (time &gt; <span class="number">1000</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`Slow request: <span class="subst">$&#123;req.method&#125;</span> <span class="subst">$&#123;req.url&#125;</span> - <span class="subst">$&#123;time&#125;</span>ms`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Memory Usage Monitoring</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> memUsage = process.<span class="title function_">memoryUsage</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Memory usage:&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">rss</span>: <span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.round(memUsage.rss / <span class="number">1024</span> / <span class="number">1024</span>)&#125;</span> MB`</span>,</span><br><span class="line">    <span class="attr">heapTotal</span>: <span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.round(memUsage.heapTotal / <span class="number">1024</span> / <span class="number">1024</span>)&#125;</span> MB`</span>,</span><br><span class="line">    <span class="attr">heapUsed</span>: <span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.round(memUsage.heapUsed / <span class="number">1024</span> / <span class="number">1024</span>)&#125;</span> MB`</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, <span class="number">30000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Database Performance</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = <span class="built_in">require</span>(<span class="string">&#x27;./models/userModel&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add indexes for better performance</span></span><br><span class="line">userSchema.<span class="title function_">index</span>(&#123; <span class="attr">email</span>: <span class="number">1</span> &#125;);</span><br><span class="line">userSchema.<span class="title function_">index</span>(&#123; <span class="attr">createdAt</span>: -<span class="number">1</span> &#125;);</span><br><span class="line">userSchema.<span class="title function_">index</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;text&#x27;</span>, <span class="attr">email</span>: <span class="string">&#x27;text&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use lean() for read-only operations</span></span><br><span class="line"><span class="keyword">const</span> users = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">find</span>().<span class="title function_">lean</span>();</span><br></pre></td></tr></table></figure>

<h3 id="Security-Best-Practices-1"><a href="#Security-Best-Practices-1" class="headerlink" title="Security Best Practices"></a>Security Best Practices</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Input Sanitization</span></span><br><span class="line"><span class="keyword">const</span> xss = <span class="built_in">require</span>(<span class="string">&#x27;xss-clean&#x27;</span>);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">xss</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Prevent NoSQL Injection</span></span><br><span class="line"><span class="comment">// Use proper validation and sanitization</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">sanitizeInput</span> = (<span class="params">input</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> input.<span class="title function_">replace</span>(<span class="regexp">/[&lt;&gt;]/g</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Rate Limiting</span></span><br><span class="line"><span class="keyword">const</span> rateLimit = <span class="built_in">require</span>(<span class="string">&#x27;express-rate-limit&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> authLimiter = <span class="title function_">rateLimit</span>(&#123;</span><br><span class="line">  <span class="attr">windowMs</span>: <span class="number">15</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="comment">// 15 minutes</span></span><br><span class="line">  <span class="attr">max</span>: <span class="number">5</span>, <span class="comment">// 5 requests per window</span></span><br><span class="line">  <span class="attr">message</span>: <span class="string">&#x27;Too many login attempts&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. JWT Security</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> token = jwt.<span class="title function_">sign</span>(</span><br><span class="line">  &#123; <span class="attr">id</span>: user.<span class="property">_id</span> &#125;,</span><br><span class="line">  process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">expiresIn</span>: <span class="string">&#x27;1h&#x27;</span>,</span><br><span class="line">    <span class="attr">issuer</span>: <span class="string">&#x27;your-app&#x27;</span>,</span><br><span class="line">    <span class="attr">audience</span>: <span class="string">&#x27;your-app-users&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. Password Security</span></span><br><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcryptjs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> saltRounds = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">const</span> hashedPassword = <span class="keyword">await</span> bcrypt.<span class="title function_">hash</span>(password, saltRounds);</span><br></pre></td></tr></table></figure>

<h2 id="8-Tai-lieu-tham-khao"><a href="#8-Tai-lieu-tham-khao" class="headerlink" title="8. Tài liệu tham khảo"></a>8. Tài liệu tham khảo</h2><h3 id="Official-Documentation"><a href="#Official-Documentation" class="headerlink" title="Official Documentation"></a>Official Documentation</h3><ul>
<li><a href="https://restfulapi.net/">REST API Tutorial</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">HTTP Status Codes</a></li>
<li><a href="https://expressjs.com/">Express.js Documentation</a></li>
<li><a href="https://docs.mongodb.com/">MongoDB Documentation</a></li>
</ul>
<h3 id="API-Design-Guides"><a href="#API-Design-Guides" class="headerlink" title="API Design Guides"></a>API Design Guides</h3><ul>
<li><a href="https://github.com/microsoft/api-guidelines">Microsoft REST API Guidelines</a></li>
<li><a href="https://cloud.google.com/apis/design">Google API Design Guide</a></li>
<li><a href="https://github.com/paypal/api-standards">PayPal API Style Guide</a></li>
<li><a href="https://stripe.com/docs/api">Stripe API Reference</a></li>
</ul>
<h3 id="Testing-Tools"><a href="#Testing-Tools" class="headerlink" title="Testing Tools"></a>Testing Tools</h3><ul>
<li><a href="https://www.postman.com/">Postman</a></li>
<li><a href="https://insomnia.rest/">Insomnia</a></li>
<li><a href="https://www.thunderclient.com/">Thunder Client</a></li>
<li><a href="https://github.com/visionmedia/supertest">Supertest</a></li>
<li><a href="https://jestjs.io/">Jest</a></li>
</ul>
<h3 id="Security-Resources"><a href="#Security-Resources" class="headerlink" title="Security Resources"></a>Security Resources</h3><ul>
<li><a href="https://owasp.org/www-project-api-security/">OWASP API Security Top 10</a></li>
<li><a href="https://jwt.io/">JWT.io</a></li>
<li><a href="https://github.com/dcodeIO/bcrypt.js/">bcrypt.js</a></li>
<li><a href="https://helmetjs.github.io/">helmet.js</a></li>
</ul>
<h3 id="Performance-Tools"><a href="#Performance-Tools" class="headerlink" title="Performance Tools"></a>Performance Tools</h3><ul>
<li><a href="https://newrelic.com/">New Relic</a></li>
<li><a href="https://www.datadoghq.com/">DataDog</a></li>
<li><a href="https://developers.google.com/web/tools/lighthouse">Lighthouse</a></li>
<li><a href="https://www.webpagetest.org/">WebPageTest</a></li>
</ul>
<h3 id="Monitoring-Logging"><a href="#Monitoring-Logging" class="headerlink" title="Monitoring &amp; Logging"></a>Monitoring &amp; Logging</h3><ul>
<li><a href="https://github.com/winstonjs/winston">Winston</a></li>
<li><a href="https://github.com/expressjs/morgan">Morgan</a></li>
<li><a href="https://pm2.keymetrics.io/">PM2</a></li>
<li><a href="https://sentry.io/">Sentry</a></li>
</ul>
<h3 id="Documentation-Tools"><a href="#Documentation-Tools" class="headerlink" title="Documentation Tools"></a>Documentation Tools</h3><ul>
<li><a href="https://swagger.io/">Swagger&#x2F;OpenAPI</a></li>
<li><a href="https://learning.postman.com/docs/postman/collections/">Postman Collections</a></li>
<li><a href="https://jsdoc.app/">JSDoc</a></li>
<li><a href="https://apiblueprint.org/">API Blueprint</a></li>
</ul>
<h3 id="Development-Tools-1"><a href="#Development-Tools-1" class="headerlink" title="Development Tools"></a>Development Tools</h3><ul>
<li><a href="https://code.visualstudio.com/">VS Code</a></li>
<li><a href="https://www.postman.com/">Postman</a></li>
<li><a href="https://www.mongodb.com/products/compass">MongoDB Compass</a></li>
<li><a href="https://robomongo.org/">Robo 3T</a></li>
</ul>
<h3 id="Deployment-Platforms"><a href="#Deployment-Platforms" class="headerlink" title="Deployment Platforms"></a>Deployment Platforms</h3><ul>
<li><a href="https://heroku.com/">Heroku</a></li>
<li><a href="https://vercel.com/">Vercel</a></li>
<li><a href="https://netlify.com/">Netlify</a></li>
<li><a href="https://aws.amazon.com/">AWS</a></li>
<li><a href="https://cloud.google.com/">Google Cloud</a></li>
<li><a href="https://azure.microsoft.com/">Azure</a></li>
</ul>
<hr>
<p><strong>🎯 Kết quả sau khi học RESTful API:</strong></p>
<ul>
<li>✅ Hiểu sâu về REST architecture và HTTP protocol</li>
<li>✅ Thành thạo thiết kế API endpoints và response formats</li>
<li>✅ Implement authentication, authorization và security</li>
<li>✅ Build scalable và maintainable APIs</li>
<li>✅ Test và debug API effectively</li>
<li>✅ Optimize API performance và caching</li>
<li>✅ Deploy và monitor production APIs</li>
<li>✅ Apply API design best practices</li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Vui lòng kích hoạt JavaScript để xem các bình luận.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/archives/">Trang chủ</a></li>
        
          <li><a href="/Zero-to-hero-Series-Overview/">Zero to Hero</a></li>
        
          <li><a href="/archives/">Bài viết</a></li>
        
          <li><a href="/about/">Giới thiệu</a></li>
        
          <li><a href="https://github.com/ph4n4n">Dự án</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Zero-to-Hero-RESTful-API-Thiet-ke-va-xay-dung-API-chuan"><span class="toc-number">1.</span> <span class="toc-text">Zero to Hero: RESTful API - Thiết kế và xây dựng API chuẩn</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Gioi-thieu-va-khai-niem-co-ban"><span class="toc-number">1.1.</span> <span class="toc-text">1. Giới thiệu và khái niệm cơ bản</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RESTful-API-la-gi"><span class="toc-number">1.1.1.</span> <span class="toc-text">RESTful API là gì?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dac-diem-chinh"><span class="toc-number">1.1.2.</span> <span class="toc-text">Đặc điểm chính:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lich-su-phat-trien"><span class="toc-number">1.1.3.</span> <span class="toc-text">Lịch sử phát triển:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REST-vs-SOAP-vs-GraphQL"><span class="toc-number">1.1.4.</span> <span class="toc-text">REST vs SOAP vs GraphQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-Methods-va-y-nghia"><span class="toc-number">1.1.5.</span> <span class="toc-text">HTTP Methods và ý nghĩa</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Cai-dat-va-setup-moi-truong"><span class="toc-number">1.2.</span> <span class="toc-text">2. Cài đặt và setup môi trường</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Development-Tools"><span class="toc-number">1.2.1.</span> <span class="toc-text">Development Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Project-Structure"><span class="toc-number">1.2.2.</span> <span class="toc-text">Project Structure</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Environment-Setup"><span class="toc-number">1.2.3.</span> <span class="toc-text">Environment Setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Database-Setup"><span class="toc-number">1.2.4.</span> <span class="toc-text">Database Setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Basic-Server-Setup"><span class="toc-number">1.2.5.</span> <span class="toc-text">Basic Server Setup</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Cu-phap-va-cau-truc-co-ban"><span class="toc-number">1.3.</span> <span class="toc-text">3. Cú pháp và cấu trúc cơ bản</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-Status-Codes"><span class="toc-number">1.3.1.</span> <span class="toc-text">HTTP Status Codes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Response-Format-Standards"><span class="toc-number">1.3.2.</span> <span class="toc-text">Response Format Standards</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL-Design-Patterns"><span class="toc-number">1.3.3.</span> <span class="toc-text">URL Design Patterns</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Query-Parameters"><span class="toc-number">1.3.4.</span> <span class="toc-text">Query Parameters</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Cac-tinh-nang-nang-cao"><span class="toc-number">1.4.</span> <span class="toc-text">4. Các tính năng nâng cao</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Authentication-Authorization"><span class="toc-number">1.4.1.</span> <span class="toc-text">Authentication &amp; Authorization</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Validation-Middleware"><span class="toc-number">1.4.2.</span> <span class="toc-text">Validation Middleware</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error-Handling"><span class="toc-number">1.4.3.</span> <span class="toc-text">Error Handling</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Caching-Strategy"><span class="toc-number">1.4.4.</span> <span class="toc-text">Caching Strategy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rate-Limiting"><span class="toc-number">1.4.5.</span> <span class="toc-text">Rate Limiting</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Best-practices-va-patterns"><span class="toc-number">1.5.</span> <span class="toc-text">5. Best practices và patterns</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#API-Versioning"><span class="toc-number">1.5.1.</span> <span class="toc-text">API Versioning</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Documentation-Standards"><span class="toc-number">1.5.2.</span> <span class="toc-text">Documentation Standards</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Security-Best-Practices"><span class="toc-number">1.5.3.</span> <span class="toc-text">Security Best Practices</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Performance-Optimization"><span class="toc-number">1.5.4.</span> <span class="toc-text">Performance Optimization</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Vi-du-thuc-te"><span class="toc-number">1.6.</span> <span class="toc-text">6. Ví dụ thực tế</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Complete-User-API"><span class="toc-number">1.6.1.</span> <span class="toc-text">Complete User API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Testing-API"><span class="toc-number">1.6.2.</span> <span class="toc-text">Testing API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Troubleshooting-va-tips"><span class="toc-number">1.7.</span> <span class="toc-text">7. Troubleshooting và tips</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Common-API-Issues"><span class="toc-number">1.7.1.</span> <span class="toc-text">Common API Issues</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Debugging-Techniques"><span class="toc-number">1.7.2.</span> <span class="toc-text">Debugging Techniques</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Performance-Monitoring"><span class="toc-number">1.7.3.</span> <span class="toc-text">Performance Monitoring</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Security-Best-Practices-1"><span class="toc-number">1.7.4.</span> <span class="toc-text">Security Best Practices</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Tai-lieu-tham-khao"><span class="toc-number">1.8.</span> <span class="toc-text">8. Tài liệu tham khảo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Official-Documentation"><span class="toc-number">1.8.1.</span> <span class="toc-text">Official Documentation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#API-Design-Guides"><span class="toc-number">1.8.2.</span> <span class="toc-text">API Design Guides</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Testing-Tools"><span class="toc-number">1.8.3.</span> <span class="toc-text">Testing Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Security-Resources"><span class="toc-number">1.8.4.</span> <span class="toc-text">Security Resources</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Performance-Tools"><span class="toc-number">1.8.5.</span> <span class="toc-text">Performance Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Monitoring-Logging"><span class="toc-number">1.8.6.</span> <span class="toc-text">Monitoring &amp; Logging</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Documentation-Tools"><span class="toc-number">1.8.7.</span> <span class="toc-text">Documentation Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Development-Tools-1"><span class="toc-number">1.8.8.</span> <span class="toc-text">Development Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deployment-Platforms"><span class="toc-number">1.8.9.</span> <span class="toc-text">Deployment Platforms</span></a></li></ol></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&text=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&is_video=false&description=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn&body=Check out this article: https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&title=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&name=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://ph4n4n.github.io/Zero-to-hero-RestfulAPI/&t=Zero to Hero: RESTful API - Thiết Kế Và Xây Dựng API Chuẩn"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Chia sẻ</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Về đầu trang</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Bản quyền &copy;
    
    
    2018-2025
    ph4n4n
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/archives/">Trang chủ</a></li><!--
     --><!--
       --><li><a href="/Zero-to-hero-Series-Overview/">Zero to Hero</a></li><!--
     --><!--
       --><li><a href="/archives/">Bài viết</a></li><!--
     --><!--
       --><li><a href="/about/">Giới thiệu</a></li><!--
     --><!--
       --><li><a href="https://github.com/ph4n4n">Dự án</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'https-ph4n4n-github-io';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>

<!-- utterances Comments -->


<script>
(function() {
  var fallbackQuotes = [
    {q: 'Stay hungry, stay foolish.', a: 'Steve Jobs'},
    {q: 'Không có thành công nào mà không phải trả giá.', a: 'Ẩn danh'},
    {q: 'Simplicity is the soul of efficiency.', a: 'Austin Freeman'},
    {q: 'Hãy kiên trì, mọi thứ rồi sẽ ổn.', a: 'Ẩn danh'},
    {q: 'Code is like humor. When you have to explain it, it\'s bad.', a: 'Cory House'},
    {q: 'Chỉ cần bạn không dừng lại thì việc bạn tiến chậm cũng không là vấn đề.', a: 'Khổng Tử'},
    {q: 'The best way to get started is to quit talking and begin doing.', a: 'Walt Disney'},
    {q: 'Muốn đi nhanh thì đi một mình, muốn đi xa thì đi cùng nhau.', a: 'Tục ngữ'},
    {q: 'First, solve the problem. Then, write the code.', a: 'John Johnson'},
    {q: 'Đừng sợ thất bại, hãy sợ không thử.', a: 'Ẩn danh'},
    {q: 'No code no bug, no bug no life.', a: 'ph4n4n'},
    {q: 'No code no bug, no code no food.', a: 'ph4n4n'},
    {q: 'The only way to do great work is to love what you do.', a: 'Steve Jobs'},
    {q: 'Je suis món ennemi.', a: 'ph4n4n'},
    {q: 'Chết không phải lúc trái tim ngừng đập, chết là khi ý chí ngừng tiến lên.', a: 'ChatGPT'},
    {q: "Life is what happens when you're busy making other plans.", a: "John Lennon"},
    {q: "The purpose of our lives is to be happy.", a: "Dalai Lama"},
    {q: "In the middle of every difficulty lies opportunity.", a: "Albert Einstein"},
    {q: "Live as if you were to die tomorrow. Learn as if you were to live forever.", a: "Mahatma Gandhi"},
    {q: "Do not go where the path may lead, go instead where there is no path and leave a trail.", a: "Ralph Waldo Emerson"},
    {q: "Simplicity is the ultimate sophistication.", a: "Leonardo da Vinci"},
    {q: "We do not remember days, we remember moments.", a: "Cesare Pavese"},
    {q: "Happiness is not something ready made. It comes from your own actions.", a: "Dalai Lama"},
    {q: "Everything you can imagine is real.", a: "Pablo Picasso"},
    {q: "Success is not the key to happiness. Happiness is the key to success.", a: "Albert Schweitzer"},
    {q: "Success usually comes to those who are too busy to be looking for it.", a: "Henry David Thoreau"},
    {q: "The only place where success comes before work is in the dictionary.", a: "Vidal Sassoon"},
    {q: "I have not failed. I've just found 10,000 ways that won't work.", a: "Thomas Edison"},
    {q: "Success is walking from failure to failure with no loss of enthusiasm.", a: "Winston Churchill"},
    {q: "Don't watch the clock; do what it does. Keep going.", a: "Sam Levenson"},
    {q: "Opportunities don't happen. You create them.", a: "Chris Grosser"},
    {q: "If you really look closely, most overnight successes took a long time.", a: "Steve Jobs"},
    {q: "The way to get started is to quit talking and begin doing.", a: "Walt Disney"},
    {q: "Only those who dare to fail greatly can ever achieve greatly.", a: "Robert F. Kennedy"},
    {q: "Dream big and dare to fail.", a: "Norman Vaughan"},
    {q: "Stay hungry, stay foolish.", a: "Steve Jobs"},
    {q: "Whether you think you can or you think you can’t, you’re right.", a: "Henry Ford"},
    {q: "Imagination is more important than knowledge.", a: "Albert Einstein"},
    {q: "Creativity is intelligence having fun.", a: "Albert Einstein"},
    {q: "What you think, you become. What you feel, you attract. What you imagine, you create.", a: "Buddha"},
    {q: "The mind is everything. What you think you become.", a: "Buddha"},
    {q: "Do one thing every day that scares you.", a: "Eleanor Roosevelt"},
    {q: "If you want something you've never had, you must be willing to do something you've never done.", a: "Thomas Jefferson"},
    {q: "Think big, start small, move fast.", a: "Unknown"},
    {q: "An unexamined life is not worth living.", a: "Socrates"},
    {q: "Discipline is the bridge between goals and accomplishment.", a: "Jim Rohn"},
    {q: "Do not pray for an easy life, pray for the strength to endure a difficult one.", a: "Bruce Lee"},
    {q: "There is no substitute for hard work.", a: "Thomas Edison"},
    {q: "Don’t limit your challenges. Challenge your limits.", a: "Unknown"},
    {q: "The man who moves a mountain begins by carrying away small stones.", a: "Confucius"},
    {q: "Work hard in silence, let your success be your noise.", a: "Frank Ocean"},
    {q: "Success isn’t always about greatness. It’s about consistency.", a: "Dwayne Johnson"},
    {q: "Start where you are. Use what you have. Do what you can.", a: "Arthur Ashe"},
    {q: "Perseverance is failing 19 times and succeeding the 20th.", a: "Julie Andrews"},
    {q: "Do it with passion, or not at all.", a: "Rosa Nouchette Carey"},
    {q: "The only true wisdom is in knowing you know nothing.", a: "Socrates"},
    {q: "Education is the most powerful weapon which you can use to change the world.", a: "Nelson Mandela"},
    {q: "Knowledge speaks, but wisdom listens.", a: "Jimi Hendrix"},
    {q: "Learning never exhausts the mind.", a: "Leonardo da Vinci"},
    {q: "Change is the end result of all true learning.", a: "Leo Buscaglia"},
    {q: "The more that you read, the more things you will know.", a: "Dr. Seuss"},
    {q: "Tell me and I forget. Teach me and I remember. Involve me and I learn.", a: "Benjamin Franklin"},
    {q: "A wise man can learn more from a foolish question than a fool can learn from a wise answer.", a: "Bruce Lee"},
    {q: "Curiosity is the wick in the candle of learning.", a: "William Arthur Ward"},
    {q: "Live as if you were to die tomorrow. Learn as if you were to live forever.", a: "Mahatma Gandhi"},
    {q: "Where there is love there is life.", a: "Mahatma Gandhi"},
    {q: "The best thing to hold onto in life is each other.", a: "Audrey Hepburn"},
    {q: "We accept the love we think we deserve.", a: "Stephen Chbosky"},
    {q: "Love all, trust a few, do wrong to none.", a: "William Shakespeare"},
    {q: "You always gain by giving love.", a: "Reese Witherspoon"},
    {q: "Love is composed of a single soul inhabiting two bodies.", a: "Aristotle"},
    {q: "To love and be loved is to feel the sun from both sides.", a: "David Viscott"},
    {q: "Love is not only something you feel, it is something you do.", a: "David Wilkerson"},
    {q: "At the touch of love everyone becomes a poet.", a: "Plato"},
    {q: "Being deeply loved by someone gives you strength, while loving someone deeply gives you courage.", a: "Lao Tzu"},
    {q: "He who has a why to live can bear almost any how.", a: "Friedrich Nietzsche"},
    {q: "Knowing yourself is the beginning of all wisdom.", a: "Aristotle"},
    {q: "It does not matter how slowly you go as long as you do not stop.", a: "Confucius"},
    {q: "Be yourself; everyone else is already taken.", a: "Oscar Wilde"},
    {q: "The greatest wealth is to live content with little.", a: "Plato"},
    {q: "Peace begins with a smile.", a: "Mother Teresa"},
    {q: "We are what we repeatedly do. Excellence, then, is not an act, but a habit.", a: "Aristotle"},
    {q: "The unexamined life is not worth living.", a: "Socrates"},
    {q: "Do not dwell in the past, do not dream of the future, concentrate the mind on the present moment.", a: "Buddha"},
    {q: "You must be the change you wish to see in the world.", a: "Mahatma Gandhi"},
    {q: "Leadership is not about being in charge. It is about taking care of those in your charge.", a: "Simon Sinek"},
    {q: "A leader is one who knows the way, goes the way, and shows the way.", a: "John C. Maxwell"},
    {q: "The greatest leader is not necessarily the one who does the greatest things. He is the one that gets the people to do the greatest things.", a: "Ronald Reagan"},
    {q: "Management is doing things right; leadership is doing the right things.", a: "Peter Drucker"},
    {q: "If your actions inspire others to dream more, learn more, do more and become more, you are a leader.", a: "John Quincy Adams"},
    {q: "The function of leadership is to produce more leaders, not more followers.", a: "Ralph Nader"},
    {q: "Innovation distinguishes between a leader and a follower.", a: "Steve Jobs"},
    {q: "Don't follow the crowd, let the crowd follow you.", a: "Margaret Thatcher"},
    {q: "Power isn't control at all – power is strength, and giving that strength to others.", a: "Beth Revis"},
    {q: "Leadership is not a position or a title, it is action and example.", a: "Cory Booker"},
    {q: "Don’t count the days, make the days count.", a: "Muhammad Ali"},
    {q: "Push yourself, because no one else is going to do it for you.", a: "Unknown"},
    {q: "Great things never come from comfort zones.", a: "Unknown"},
    {q: "You don’t have to be great to start, but you have to start to be great.", a: "Zig Ziglar"},
    {q: "Your time is limited, so don’t waste it living someone else’s life.", a: "Steve Jobs"},
    {q: "Pain is temporary. Quitting lasts forever.", a: "Lance Armstrong"},
    {q: "Believe you can and you're halfway there.", a: "Theodore Roosevelt"},
    {q: "The harder you work for something, the greater you'll feel when you achieve it.", a: "Unknown"},
    {q: "Success is the sum of small efforts, repeated day-in and day-out.", a: "Robert Collier"},
    {q: "Be fearless in the pursuit of what sets your soul on fire.", a: "Jennifer Lee"},
    {q: "I can resist everything except temptation.", a: "Oscar Wilde"},
    {q: "Behind every great man is a woman rolling her eyes.", a: "Jim Carrey"},
    {q: "If you think you are too small to make a difference, try sleeping with a mosquito.", a: "Dalai Lama"},
    {q: "A day without laughter is a day wasted.", a: "Charlie Chaplin"},
    {q: "Life is short. Smile while you still have teeth.", a: "Unknown"},
    {q: "If at first you don’t succeed, then skydiving definitely isn’t for you.", a: "Steven Wright"},
    {q: "The road to success is always under construction.", a: "Lily Tomlin"},
    {q: "Behind every successful man is a surprised woman.", a: "Maryon Pearson"},
    {q: "I always wanted to be somebody, but now I realize I should have been more specific.", a: "Lily Tomlin"},
    {q: "Age is of no importance unless you’re a cheese.", a: "Billie Burke"},
    {q: "Chết không phải lúc trái tim ngừng đập, chết là khi ý chí ngừng tiến lên.", a: "ChatGPT"},
    {q: "Không có thành công nào mà không phải trả giá.", a: "Ẩn danh"},
    {q: "Bạn không thể thay đổi hướng gió, nhưng có thể điều chỉnh cánh buồm.", a: "Jimmy Dean"},
    {q: "Thành công là khi bạn đứng dậy nhiều hơn số lần bạn ngã xuống.", a: "Nelson Mandela"},
    {q: "Kiên trì không phải là làm mãi một việc, mà là không từ bỏ mục tiêu.", a: "Ngạn ngữ Nhật"},
    {q: "Thất bại không phải là ngược lại với thành công, mà là một phần của thành công.", a: "Arianna Huffington"},
    {q: "Chỉ cần không dừng lại, thì dù chậm đến đâu bạn vẫn đang tiến lên.", a: "Khổng Tử"},
    {q: "Thái độ quan trọng hơn trình độ.", a: "Zig Ziglar"},
    {q: "Hãy sống như thể bạn sẽ chết vào ngày mai. Hãy học như thể bạn sẽ sống mãi mãi.", a: "Mahatma Gandhi"},
    {q: "Muốn đi nhanh thì đi một mình, muốn đi xa thì đi cùng nhau.", a: "Tục ngữ châu Phi"},
    {q: "Đừng đếm những gì bạn mất, hãy trân trọng những gì bạn còn.", a: "Ẩn danh"},
    {q: "Hạnh phúc không phải là đích đến, mà là hành trình.", a: "Thích Nhất Hạnh"},
    {q: "Người ta không nhớ bạn nói gì, họ nhớ bạn làm họ cảm thấy thế nào.", a: "Maya Angelou"},
    {q: "Đời thay đổi khi ta thay đổi.", a: "Tony Robbins"},
    {q: "Khó khăn tạo nên con người mạnh mẽ.", a: "Ngạn ngữ Nga"},
    {q: "Người không mắc sai lầm là người không làm gì cả.", a: "Theodore Roosevelt"},
    {q: "Giá trị của một người không nằm ở chỗ họ biết gì, mà là ở cách họ sử dụng điều họ biết.", a: "Bruce Lee"},
    {q: "Thành công lớn nhất là làm chủ được chính mình.", a: "Plato"},
    {q: "Người thông minh giải quyết vấn đề. Người khôn ngoan tránh vấn đề.", a: "Albert Einstein"},
    {q: "Tư duy tích cực là nhiên liệu của hành động tích cực.", a: "Zig Ziglar"},
    {q: "Đừng mong mọi thứ dễ dàng, hãy mong mình mạnh mẽ hơn.", a: "Jim Rohn"},
    {q: "Không ai có thể quay lại bắt đầu một khởi đầu mới, nhưng ai cũng có thể bắt đầu hôm nay và tạo ra một kết thúc mới.", a: "Maria Robinson"},
    {q: "Hãy là sự thay đổi mà bạn muốn thấy trên thế giới.", a: "Mahatma Gandhi"},
    {q: "Đừng sống cuộc đời của người khác.", a: "Steve Jobs"},
    {q: "Người thành công là người có thói quen làm những điều người thất bại không thích làm.", a: "Albert Gray"},
    {q: "Tự do lớn nhất là làm điều đúng đắn, không cần ai phải nhắc nhở.", a: "ChatGPT"},
    {q: "Hãy học từ hôm qua, sống cho hôm nay, hy vọng cho ngày mai.", a: "Albert Einstein"},
    {q: "Đừng đánh giá tôi qua những gì tôi nói, hãy nhìn những gì tôi làm.", a: "Ẩn danh"},
    {q: "Người mạnh mẽ không phải là người không bao giờ khóc, mà là người biết đứng dậy sau mỗi lần gục ngã.", a: "Ngạn ngữ Nhật"},
    {q: "Nỗi sợ lớn nhất là sợ chính mình không đủ tốt.", a: "Ẩn danh"},
    {q: "Cơ hội không gõ cửa hai lần.", a: "Ngạn ngữ Anh"},
    {q: "Một hành trình ngàn dặm bắt đầu từ một bước chân.", a: "Lão Tử"},
    {q: "Kẻ thù lớn nhất của tri thức không phải là vô minh mà là ảo tưởng về tri thức.", a: "Stephen Hawking"},
    {q: "Chẳng có con đường nào dẫn đến hạnh phúc. Hạnh phúc chính là con đường.", a: "Thích Nhất Hạnh"},
    {q: "Không có áp lực, không có kim cương.", a: "Thomas Carlyle"},
    {q: "Kỷ luật là cây cầu nối giữa mục tiêu và thành tựu.", a: "Jim Rohn"},
    {q: "Tương lai thuộc về những người tin vào vẻ đẹp của giấc mơ mình.", a: "Eleanor Roosevelt"},
    {q: "Chấp nhận là bước đầu tiên để chữa lành.", a: "Carl Jung"},
    {q: "Thành công là kết quả của sự chuẩn bị, chăm chỉ và học hỏi từ thất bại.", a: "Colin Powell"},
    {q: "Người lạc quan thấy cơ hội trong mọi khó khăn. Kẻ bi quan thấy khó khăn trong mọi cơ hội.", a: "Winston Churchill"},
    {q: "Lỗi lầm lớn nhất là không dám thử.", a: "George Bernard Shaw"},
    {q: "Giấc mơ không trở thành hiện thực nhờ phép màu – mà nhờ mồ hôi, quyết tâm và nỗ lực.", a: "Colin Powell"},
    {q: "Khi bạn thay đổi cách nhìn, điều bạn nhìn sẽ thay đổi.", a: "Wayne Dyer"},
    {q: "Đời không cho ta thứ ta muốn, mà cho ta thứ ta cần để trưởng thành.", a: "ChatGPT"},
    {q: "Hãy sống tử tế, ai cũng đang chiến đấu một trận chiến mà ta không biết.", a: "Plato"},
    {q: "Thời gian là tài sản quý giá nhất – vì một khi đã mất đi, không thể lấy lại được.", a: "Harvey Mackay"},
    {q: "Không ai tắm hai lần trên cùng một dòng sông.", a: "Heraclitus"},
    {q: "Chỉ có những ai sẵn sàng đi xa mới biết mình có thể đi bao xa.", a: "T.S. Eliot"},
    {q: "Hành động là nền tảng của thành công.", a: "Pablo Picasso"},
    {q: "Nếu bạn không xây ước mơ cho mình, bạn sẽ bị thuê để xây ước mơ cho người khác.", a: "Tony Gaskins"},
    {q: "Mỗi sáng thức dậy là thêm một cơ hội để làm lại.", a: "ChatGPT"},
    {q: "Người mạnh mẽ nhất là người kiểm soát được cảm xúc của chính mình.", a: "Seneca"},
    {q: "Không ai sinh ra đã giỏi – mọi thứ đều là luyện tập.", a: "Angela Duckworth"},
    {q: "Lựa chọn tạo nên con người – không phải khả năng.", a: "J.K. Rowling"},
    {q: "Giá trị của bạn không đến từ người khác công nhận bạn, mà từ chính bạn tin vào bản thân mình.", a: "ChatGPT"},
    {q: "Sự khác biệt giữa người bình thường và người phi thường chính là một chút 'phi'.", a: "Jimmy Johnson"},
    {q: "Bình an không phải là không có sóng gió, mà là vẫn vững vàng giữa sóng gió.", a: "ChatGPT"},
    {q: "Nỗi đau là tạm thời. Từ bỏ là mãi mãi.", a: "Lance Armstrong"},
    {q: "Nếu bạn không lên kế hoạch cho cuộc sống của mình, người khác sẽ làm điều đó thay bạn.", a: "Jim Rohn"},
    {q: "Đừng để những gì bạn không thể làm cản trở điều bạn có thể làm.", a: "John Wooden"},
    {q: "Mọi việc xảy ra đều có lý do của nó – hãy học cách tìm ra bài học.", a: "ChatGPT"},
    {q: "Người khôn ngoan là người biết học từ người khác.", a: "Voltaire"},
    {q: "Kiến thức là sức mạnh, nhưng hành động mới là sức mạnh thực sự.", a: "Tony Robbins"},
    {q: "Tình yêu là sức mạnh duy nhất có thể biến kẻ thù thành bạn bè.", a: "Martin Luther King Jr."},
    {q: "Chúng ta chính là những gì chúng ta làm lặp đi lặp lại. Vì vậy, xuất sắc không phải là hành động, mà là thói quen.", a: "Aristotle"},
    {q: "Người thành công có hai điều: lý do tốt và lý do vững chắc.", a: "Napoleon Hill"},
    {q: "Đừng tìm lý do. Hãy tìm cách.", a: "Jack Ma"},
    {q: "Nếu không thay đổi, bạn sẽ mãi là phiên bản cũ của chính mình.", a: "ChatGPT"},
    {q: "Đôi khi bạn không cần động lực, bạn cần kỷ luật.", a: "ChatGPT"},
    {q: "Hãy bắt đầu từ điều nhỏ nhất, nhưng đừng dừng lại.", a: "Lão Tử"},
    {q: "Người biết đủ là người giàu có.", a: "Lão Tử"},
    {q: "Không gì là không thể với một trái tim quyết tâm.", a: "Napoleon Bonaparte"},
    {q: "Lòng biết ơn biến điều bình thường thành điều đặc biệt.", a: "Melody Beattie"},
    {q: "Người mạnh không phải người không bao giờ khóc, mà là người dám khóc rồi vẫn tiếp tục tiến bước.", a: "ChatGPT"},
    {q: "Bạn không cần phải thấy toàn bộ cầu thang – chỉ cần bước bước đầu tiên.", a: "Martin Luther King Jr."},
    {q: "Khi bạn cảm thấy mệt, hãy học cách nghỉ – đừng từ bỏ.", a: "Banksy"},
    {q: "Đừng sợ thay đổi, đôi khi điều tốt đẹp phải kết thúc để điều tốt hơn bắt đầu.", a: "ChatGPT"},
    {q: "Người biết lắng nghe là người có thể thay đổi cả thế giới.", a: "Dalai Lama"},
    {q: "Trí tuệ thực sự là biết mình không biết gì.", a: "Socrates"},
    {q: "Đường dài không làm bạn mỏi mệt, chính là đôi giày sai mới khiến bạn đau đớn.", a: "ChatGPT"},
    {q: "Sống đơn giản cho tâm trí nhẹ nhàng.", a: "Thích Nhất Hạnh"},
    {q: "Hãy sống như bạn đang viết nên một câu chuyện đáng nhớ.", a: "ChatGPT"},
    {q: "Bạn càng biết nhiều, bạn càng biết mình chẳng biết gì.", a: "Socrates"},
    {q: "Thành công không đến từ việc luôn đúng, mà từ việc học từ khi sai.", a: "ChatGPT"},
    {q: "Hãy sống như thể bạn là ánh sáng cuối cùng còn lại trong đêm tối.", a: "ChatGPT"},
    {q: "Cách bạn làm một việc là cách bạn làm mọi việc.", a: "ChatGPT"}
  ];
  var el = document.getElementById('random-quote');
  function showQuote(q, a) {
    if (el) el.innerHTML = q + (a ? ' <span style="font-size:0.95em;color:#888;">– ' + a + '</span>' : '');
  }
  function showFallback() {
    var r = fallbackQuotes[Math.floor(Math.random() * fallbackQuotes.length)];
    showQuote(r.q, r.a);
  }
  fetch('https://zenquotes.io/api/random')
    .then(function(res) { return res.ok ? res.json() : Promise.reject(); })
    .then(function(data) {
      if (Array.isArray(data) && data[0] && data[0].q) {
        showQuote(data[0].q, data[0].a);
      } else {
        showFallback();
      }
    })
    .catch(showFallback);
})();
</script>
</body>
</html>
